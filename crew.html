<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Crew - Steadfast</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="dashboard.html">
                <i class="fas fa-shield-alt"></i> Steadfast
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="dashboard.html">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="toolkit.html">Toolkit</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="garage.html">The Garage</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="crew.html">The Crew</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container mt-4">
        <!-- Page Header -->
        <div class="row mb-4">
            <div class="col-12">
                <h1>The Crew</h1>
                <p class="lead">Connect with others who get it</p>
            </div>
        </div>

        <!-- Quick Stats -->
        <div class="row mb-4">
            <div class="col-md-3 col-6 mb-3">
                <div class="card text-center">
                    <div class="card-body">
                        <h4 class="text-primary" id="totalMembers">0</h4>
                        <small>Community Members</small>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-6 mb-3">
                <div class="card text-center">
                    <div class="card-body">
                        <h4 class="text-success" id="myGroups">0</h4>
                        <small>My Groups</small>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-6 mb-3">
                <div class="card text-center">
                    <div class="card-body">
                        <h4 class="text-info" id="upcomingEvents">0</h4>
                        <small>Upcoming Events</small>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-6 mb-3">
                <div class="card text-center">
                    <div class="card-body">
                        <h4 class="text-warning" id="activeChats">0</h4>
                        <small>Active Chats</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Tabs -->
        <ul class="nav nav-tabs mb-4" id="crewTabs">
            <li class="nav-item">
                <button class="nav-link active" onclick="showTab('groups')">
                    <i class="fas fa-users"></i> Support Groups
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link" onclick="showTab('squads')">
                    <i class="fas fa-user-friends"></i> My Squads
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link" onclick="showTab('events')">
                    <i class="fas fa-calendar"></i> Events
                </button>
            </li>
        </ul>

        <!-- Support Groups Tab -->
        <div id="groupsTab" class="tab-content">
            <div class="row mb-4">
                <div class="col-md-8">
                    <input type="text" class="form-control" id="groupSearch" placeholder="Search groups...">
                </div>
                <div class="col-md-4">
                    <select class="form-select" id="groupCategory">
                        <option value="">All Categories</option>
                        <option value="fatherhood">Fatherhood</option>
                        <option value="career">Career</option>
                        <option value="relationships">Relationships</option>
                        <option value="recovery">Recovery</option>
                        <option value="general">General Support</option>
                    </select>
                </div>
            </div>

            <div class="row" id="groupsGrid">
                <!-- Groups will be loaded here by JavaScript -->
            </div>
        </div>

        <!-- My Squads Tab -->
        <div id="squadsTab" class="tab-content" style="display: none;">
            <div class="row mb-4">
                <div class="col-12">
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#createSquadModal">
                        <i class="fas fa-plus"></i> Create New Squad
                    </button>
                </div>
            </div>

            <div class="row" id="squadsGrid">
                <!-- Squads will be loaded here by JavaScript -->
            </div>

            <div class="text-center mt-4" id="noSquadsMessage" style="display: none;">
                <i class="fas fa-users fa-3x text-muted mb-3"></i>
                <h4>No Squads Yet</h4>
                <p class="text-muted">Create your first accountability squad or join existing groups.</p>
                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#createSquadModal">
                    Create Your First Squad
                </button>
            </div>
        </div>

        <!-- Events Tab -->
        <div id="eventsTab" class="tab-content" style="display: none;">
            <div class="row mb-4">
                <div class="col-md-6">
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-outline-primary active" onclick="filterEvents('upcoming')">
                            Upcoming
                        </button>
                        <button type="button" class="btn btn-outline-primary" onclick="filterEvents('past')">
                            Past Events
                        </button>
                        <button type="button" class="btn btn-outline-primary" onclick="filterEvents('my')">
                            My Events
                        </button>
                    </div>
                </div>
                <div class="col-md-6 text-end">
                    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#createEventModal">
                        <i class="fas fa-plus"></i> Host Event
                    </button>
                </div>
            </div>

            <div id="eventsList">
                <!-- Events will be loaded here by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Bottom Navigation for Mobile -->
    <nav class="navbar navbar-dark bg-dark fixed-bottom d-lg-none">
        <div class="container-fluid">
            <div class="row w-100">
                <div class="col-3 text-center">
                    <a href="dashboard.html" class="text-white"><i class="fas fa-home"></i></a>
                </div>
                <div class="col-3 text-center">
                    <a href="toolkit.html" class="text-white"><i class="fas fa-tools"></i></a>
                </div>
                <div class="col-3 text-center">
                    <a href="garage.html" class="text-white"><i class="fas fa-car"></i></a>
                </div>
                <div class="col-3 text-center">
                    <a href="crew.html" class="text-white"><i class="fas fa-users"></i></a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Group Detail Modal -->
    <div class="modal fade" id="groupDetailModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="groupDetailTitle">Group Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="groupDetailContent">
                        <!-- Group details will be loaded here -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="joinGroupBtn" onclick="joinGroup()">Join Group</button>
                    <button type="button" class="btn btn-outline-danger" id="leaveGroupBtn" style="display: none;" onclick="leaveGroup()">Leave Group</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Squad Modal -->
    <div class="modal fade" id="createSquadModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Create New Squad</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Squad Name</label>
                        <input type="text" class="form-control" id="squadName" placeholder="e.g., Morning Meditation Crew">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Purpose</label>
                        <select class="form-select" id="squadPurpose">
                            <option value="fitness">Fitness & Health</option>
                            <option value="meditation">Meditation</option>
                            <option value="career">Career Goals</option>
                            <option value="recovery">Recovery Support</option>
                            <option value="learning">Learning</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Description</label>
                        <textarea class="form-control" id="squadDescription" rows="3" placeholder="What's this squad about?"></textarea>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Max Members</label>
                        <select class="form-select" id="squadMaxMembers">
                            <option value="4">4 members</option>
                            <option value="6">6 members</option>
                            <option value="8">8 members</option>
                        </select>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="squadPrivate">
                        <label class="form-check-label" for="squadPrivate">
                            Private squad (invite only)
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="createSquad()">Create Squad</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Event Modal -->
    <div class="modal fade" id="createEventModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Host New Event</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Event Title</label>
                        <input type="text" class="form-control" id="eventTitle" placeholder="e.g., Mindfulness Workshop">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Description</label>
                        <textarea class="form-control" id="eventDescription" rows="3" placeholder="Describe your event..."></textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Date</label>
                            <input type="date" class="form-control" id="eventDate">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Time</label>
                            <input type="time" class="form-control" id="eventTime">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Event Type</label>
                        <select class="form-select" id="eventType">
                            <option value="workshop">Workshop</option>
                            <option value="qna">Q&A Session</option>
                            <option value="support">Support Group</option>
                            <option value="social">Social Event</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Platform</label>
                        <select class="form-select" id="eventPlatform">
                            <option value="zoom">Zoom</option>
                            <option value="teams">Microsoft Teams</option>
                            <option value="meet">Google Meet</option>
                            <option value="discord">Discord</option>
                            <option value="inperson">In-Person</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="createEvent()">Create Event</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Chat Modal -->
    <div class="modal fade" id="chatModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="chatModalTitle">Group Chat</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="chatMessages" style="height: 300px; overflow-y: auto; margin-bottom: 15px; border: 1px solid #e9ecef; padding: 15px; border-radius: 8px;">
                        <!-- Messages will appear here -->
                    </div>
                    <div class="input-group">
                        <input type="text" class="form-control" id="chatInput" placeholder="Type your message...">
                        <button class="btn btn-primary" onclick="sendMessage()">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
    <script src="crew.js"></script>
    <script src="achievements.js"></script>
</body>
</html>